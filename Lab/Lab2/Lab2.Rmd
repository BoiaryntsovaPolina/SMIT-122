---
title: "Математична статистика. Лабораторна робота № 2. Створення електронного документу"
author: "Бояринцова П. С."
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    df_print: paged
  pdf_document:
    toc: true
  html_notebook:
    toc: true
    toc_float: true
highlight: tango
fontsize: 12pt
#header-includes:
#- \usepackage[T2A]{fontenc}
#- \usepackage[utf8]{inputenc}
#- \usepackage[ukrainian]{babel}
editor_options:
  chunk_output_type: console
# bibliography: references_lab.bib
---

# Інструкція

Цей R Notebook демонструє:

- побудову графіка функції $y(x)=b_0 + b_1 x + b_2 x^2$ (базова графіка та ggplot2),
- експорт/імпорт даних пакетами rio,
- відображення таблиць (knitr::kable, DT::datatable).

## 2.1. Параметри та побудова графіка (базова графіка)

```{r}
# Параметри функції

b0 <- 2
b1 <- 3
b2 <- 1.57

# Межі області визначення

x1 <- -1
x2 <- 1

# Область та значення

x <- seq(x1, x2, by = 0.1)
y <- b0 + b1 * x + b2 * x^2

# Базова графіка

plot(x, y,
  type = "l",
  col = "red",
  main = "Графік функції y(x) = b0 + b1*x + b2*x^2 (базова графіка)",
  xlab = "x",
  ylab = "y")
points(x, y, col = "blue")

df <- data.frame(x = x, y = y)
```

## 2.2. Збереження даних на диск і імпорт (пакет rio)

```{r}
# install.packages("rio") # інсталяція пакету 
library(rio) # підключення пакету 
export(df, "data/data.csv") 
 
 packages <- c("rio", "dplyr", "tidyr", "ggplot2") 
 
# install.packages(packages) 
 
 lapply(packages, library, character.only=TRUE) 
 
DT::datatable(df) 
```

## 2.3.Виконуємо імпорт даних із файлу і візуалізацію у вигляді таблиці. 

```{r}
dfNew <-  import("data/data.csv") 
 
# Таблиця засобами knitr 
knitr::kable(head(dfNew), 
             caption = "_Табл. 1. Фрагмент таблиці даних_") 
```

**Табл. 2. Параметри функції**

| Параметр | Значення |
|----------|---------:|
| b0       | 2        |
| b1       | 3        |
| b2       | 1.57     |
| x1       | -1       |
| x2       | 1        |

# 3.Використання ggplot2 і оператора %>% (оптимізований код)

## 3.1

```{r}
# Встановлення пакетів при першому запуску

# install.packages(c("ggplot2", "dplyr"))

library(dplyr)
library(ggplot2)

df %>%
ggplot(aes(x = x, y = y)) +
geom_line(size = 1) +
geom_point() +
labs(title = "Графік функції (ggplot2)",
x = "x", y = "y") +
theme_minimal()
```

## 3.2. Результуюча таблиця параметрів

Табл. 2. Параметри функції

| Параметр | Значення |
|----------|---------:|
| b0       | 2        |
| b1       | 3        |
| b2       | 1.57     |
| x1       | -1       |
| x2       | 1        |

### *Контрольні запитання*

#### 1. LaTeX — формула щільності нормального розподілу 
$f(x;\mu,\sigma^2) = \frac{1}{\sqrt{2\pi\sigma^{2}}}\exp\!\left(-\frac{(x-\mu)^2}{2\sigma^{2}}\right)$

#### 2. Як розв’язати таблиці і графіки в електронний документ з використанням R Markdown і пакету rmarkdown з оглядом на читабельність та грамотність коду? 

Приклад побудови графіка (чисто, з підписами):
```{r}
df <- data.frame(x = seq(-1,1,0.1))
df <- df %>% mutate(y = 2 + 3*x + 1.57*x^2)

ggplot(df, aes(x = x, y = y)) +
geom_line() +
geom_point(size = 1.5) +
labs(title = "Графік y(x) = 2 + 3x + 1.57 x^2",
x = "x",
y = "y") +
theme_minimal()

```

Як робити таблиці читабельними:

- Для простих фрагментів використай knitr::kable();
- Для великих таблиць — DT::datatable() (інтерактивна, сортування/фільтрація).

Поради щодо структури коду:

1. Розбивай код на логічні чанки: підготовка даних → аналіз → вивід таблиць → побудова графіків.
2. Коментуй нетривіальні кроки (коротко).
3. Використовуй echo=FALSE для чанків, де показ коду не потрібен (залиш тільки результат).
4. Для великих обчислень застосовуй cache=TRUE в чанку, щоб уникнути повторних довгих обчислень.
5. Зберігай стилі коду (відступи, однакові назви змінних).

#### 3. Як вирішити завдання зі вставленням та форматуванням зображень в електронному документі з використанням R, забезпечуючи читабельність та елегантність коду? 
Декілька підходів:

1) вставити зовнішній файл з диску; 
2) зберегти графік з R і потім вставити; 
3) використовувати knitr::include_graphics() .

*Приклади*

А. Вставити зображення (файл у папці images/)

```{r}
# knitr::include_graphics("images/my_plot.png")
```

B. Зберегти ggplot у файл і вставити

```{r}
# p <- ggplot(df, aes(x,y)) + geom_line()
# ggsave("images/plot1.png", p, width = 6, height = 4, dpi = 300)
# knitr::include_graphics("images/plot1.png")
```

#### 4. Яку функцію виконує YAML-заголовок у динамічному документі?
YAML-заголовок (блок між --- на початку .Rmd) — це метадані документа. 
Основні функції:

- Вказує метадані: title, author, date, output (HTML, PDF, Word, notebook тощо).
- Налаштовує формат виводу: вибір html_document, html_notebook, pdf_document, word_document та їх опцій (toc, highlight, theme, toc_float тощо).
- Додає глобальні інструкції: bibliography, csl (стиль цитування), header-includes (додає LaTeX/HTML блоки в заголовок), params (для параметризованих звітів).
- Керує поведінкою knit/pandoc: наприклад, автоматичне включення таблиці вмісту, плаваючих зображень, форматування коду, шляхів для ресурсів.
- Впливає на читабельність: коректно налаштований YAML дозволяє отримати документ із потрібними підписами, форматуванням і без додаткових ручних кроків.
